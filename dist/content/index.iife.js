(function(){"use strict";const b="fie-impression-container",l="ql-editor",v=async()=>{var u,d,p,y,f,g,h,S;const n=document.querySelector("#algo-engage-root");if(!n)return;const t=n.closest("article"),e=n.closest("div#"+b),o=e==null?void 0:e.querySelector('button[aria-label="see more, visually reveals content which is already detected by screen readers"]');o&&(o.click(),await new Promise(a=>setTimeout(a,1200)),n.scrollIntoView({behavior:"smooth",block:"center"}));const r=((d=(u=e==null?void 0:e.querySelector('.update-components-actor__name span[aria-hidden="true"]'))==null?void 0:u.textContent)==null?void 0:d.trim())||"",i=((p=e==null?void 0:e.querySelector(".update-components-text"))==null?void 0:p.innerText.trim())||"";let c=(t==null?void 0:t.textContent)||null,s="",m="Replying to post";if(t){const a=((f=(y=t==null?void 0:t.querySelector('.comments-post-meta__name-text span[aria-hidden="true"]'))==null?void 0:y.textContent)==null?void 0:f.trim())||"",w=((h=(g=t==null?void 0:t.querySelector(".comments-comment-item__main-content"))==null?void 0:g.textContent)==null?void 0:h.trim())||"";s+=`${a}:
 ${w}
`}return((t==null?void 0:t.querySelectorAll(".comments-comment-item"))||[]).forEach(a=>{a.querySelectorAll(".comments-reply-item").forEach(q=>{var x,_,T,C;const M=((_=(x=q.querySelector('.comments-post-meta__name-text span[aria-hidden="true"]'))==null?void 0:x.textContent)==null?void 0:_.trim())||"",$=((C=(T=q.querySelector(".comments-comment-item__main-content"))==null?void 0:T.textContent)==null?void 0:C.trim())||"";s+=`${M}:
 ${$}
`})}),c&&(c=c.replace(/like(\n|\s){2,}reply/g,""),m="Replying to comment of '"+((S=e==null?void 0:e.querySelector(`.${l} a.ql-mention`))==null?void 0:S.textContent)+"'"),{postHeader:r,postContent:i,commentThread:s,replyingTo:m}};async function k(){var i,c;const n=document.querySelector("#algo-engage-root");if(!n)return;let t=n.closest("li.contribution");if(!t)return;let e=((i=t.querySelector("a span"))==null?void 0:i.textContent)||"",o=t.querySelector("div.contribution__text-wrapper");o&&o.querySelector("button")&&((c=o.querySelector("button"))==null||c.click(),await new Promise(s=>setTimeout(s,1200)),n.scrollIntoView({behavior:"smooth",block:"center"}));let r=o==null?void 0:o.textContent;return console.log({postContent:r,postHeader:e}),{postHeader:e,postContent:r,commentThread:null,replyingTo:"Replying to the post"}}async function D(){var r,i,c;const n=document.querySelector("#algo-engage-root");if(!n)return;let t=(r=n.closest("aside"))==null?void 0:r.previousElementSibling;if(!t)return;let e=((i=t.querySelector("h1.reader-article-header__title"))==null?void 0:i.textContent)||"",o=((c=t.querySelector("div.reader-article-content"))==null?void 0:c.textContent)||"";return console.log("article Selector"),console.log({postHeader:e,postContent:o}),{postHeader:e,postContent:o,commentThread:null,replyingTo:"Replying to article"}}async function E(n){var o;const t=document.querySelector("#algo-engage-root");if(!t)return;const e=(o=t.closest("form"))==null?void 0:o.querySelector(`div.${l} p`);if(e)if(n==="<clear>"){const r=e.lastChild;r&&r.nodeType===Node.TEXT_NODE&&e.removeChild(r),e.querySelector("a")&&(e.innerHTML+=" ")}else n==="<end>"||(e.innerHTML+=n)}async function R(n){var o,r;const t=document.querySelector("#algo-engage-root");if(!t)return;const e=(o=t.closest("div.contribution__reply-input-wrapper"))==null?void 0:o.querySelector("textarea");if(e)if(n==="<clear>")e.value="";else if(n==="<end>"){const i=(r=e.nextElementSibling)==null?void 0:r.querySelector("button[data-tracking-control-name='reply_post']");i.disabled=!1}else e.value+=n}chrome.runtime.onMessage.addListener((n,t,e)=>{n.action==="getDataForCommentGeneration"?window.location.href.includes("https://www.linkedin.com/advice")?k().then(o=>{chrome.runtime.sendMessage({action:"commentGenerationData",data:o})}):window.location.href.includes("https://www.linkedin.com/advice")||window.location.href.includes("https://www.linkedin.com/pulse")?D().then(o=>{chrome.runtime.sendMessage({action:"commentGenerationData",data:o})}):v().then(o=>{chrome.runtime.sendMessage({action:"commentGenerationData",data:o})}):n.action==="generatedCommentDelta"&&(window.location.href.includes("https://www.linkedin.com/advice")&&R(n.delta),E(n.delta))})})();
